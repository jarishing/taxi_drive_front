!function(e){function t(t){for(var n,l,u=t[0],s=t[1],i=t[2],d=0,f=[];d<u.length;d++)l=u[d],a[l]&&f.push(a[l][0]),a[l]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);for(c&&c(t);f.length;)f.shift()();return o.push.apply(o,i||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],n=!0,u=1;u<r.length;u++){var s=r[u];0!==a[s]&&(n=!1)}n&&(o.splice(t--,1),e=l(l.s=r[0]))}return e}var n={},a={0:0},o=[];function l(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,l),r.l=!0,r.exports}l.m=e,l.c=n,l.d=function(e,t,r){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(l.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)l.d(r,n,function(t){return e[t]}.bind(null,n));return r},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/";var u=window.webpackJsonp=window.webpackJsonp||[],s=u.push.bind(u);u.push=t,u=u.slice();for(var i=0;i<u.length;i++)t(u[i]);var c=s;o.push([0,1]),r()}({"./node_modules/moment/locale sync recursive en-au":function(e,t,r){var n={"./en-au":"./node_modules/moment/locale/en-au.js","./en-au.js":"./node_modules/moment/locale/en-au.js"};function a(e){var t=o(e);return r(t)}function o(e){var t=n[e];if(!(t+1)){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}return t}a.keys=function(){return Object.keys(n)},a.resolve=o,e.exports=a,a.id="./node_modules/moment/locale sync recursive en-au"},"./source/App.jsx":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=u(r("./node_modules/react/index.js")),o=r("./source/components/modal/modal.jsx");r("./node_modules/sweetalert/dist/sweetalert.css");var l=u(r("./source/socket.js"));u(r("./node_modules/lodash.noop/index.js"));function u(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Component),n(t,[{key:"componentWillMount",value:function(){l.default.connect(),window.plugins&&(window.plugins.speechRecognition?window.plugins.speechRecognition.hasPermission(function(e){0==e?window.plugins.speechRecognition.requestPermission(function(){return console.log("Permission granted")},function(){return console.log("Error on granted")}):console.log("Permission granted")},function(){return console.log("Error on check")}):window.alert("你的裝置並不支持語音功能"))}},{key:"render",value:function(){return a.default.createElement(a.default.Fragment,null,{...this.props.children})}}]),t}();t.default=(0,o.installModal)(s)},"./source/api/index.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(r("./source/api/user.js")),a=o(r("./source/api/order.js"));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}t.default={user:n,order:a}},"./source/api/order.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.overtimeOrder=t.acceptOrder=t.getOrdererOrder=t.confirmOrder=t.releaseOrder=t.cancelOrder=t.makeOrder=t.getOrder=t.getAnOrder=void 0;t.getAnOrder=function(){var e=u(regeneratorRuntime.mark(function e(t){var r,l,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.default.getState().base.accessToken,e.next=3,n.default.get(a.default+"/api/order/"+t,{headers:{authorization:"Bearer "+r}});case 3:return l=e.sent,u=l.data,e.abrupt("return",u.data);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.getOrder=function(){var e=u(regeneratorRuntime.mark(function e(){var t,r,l,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"new";return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.default.getState().base.accessToken,e.next=3,n.default.get(a.default+"/api/order",{params:{status:u},headers:{authorization:"Bearer "+t}});case 3:return r=e.sent,l=r.data,e.abrupt("return",l.data);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.makeOrder=function(){var e=u(regeneratorRuntime.mark(function e(t,r,l,u){var s,i,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=o.default.getState().base.accessToken,e.next=3,n.default.post(a.default+"/api/order",{origin:t,destination:l,criteria:u,route:""!=r.trim()?r.trim():void 0},{headers:{authorization:"Bearer "+s}});case 3:return i=e.sent,c=i.data,e.abrupt("return",c.data);case 6:case"end":return e.stop()}},e,this)}));return function(t,r,n,a){return e.apply(this,arguments)}}(),t.cancelOrder=function(){var e=u(regeneratorRuntime.mark(function e(t){var r,l,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.default.getState().base.accessToken,e.next=3,n.default.post(a.default+"/api/order/"+t,{type:"cancel"},{headers:{authorization:"Bearer "+r}});case 3:return l=e.sent,u=l.data,e.abrupt("return",u.data);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.releaseOrder=function(){var e=u(regeneratorRuntime.mark(function e(t){var r,l,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.default.getState().base.accessToken,e.next=3,n.default.post(a.default+"/api/order/"+t,{type:"release"},{headers:{authorization:"Bearer "+r}});case 3:return l=e.sent,u=l.data,e.abrupt("return",u.data);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.confirmOrder=function(){var e=u(regeneratorRuntime.mark(function e(t){var r,l,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.default.getState().base.accessToken,e.next=3,n.default.post(a.default+"/api/order/"+t,{type:"confirm"},{headers:{authorization:"Bearer "+r}});case 3:return l=e.sent,u=l.data,e.abrupt("return",u.data);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.getOrdererOrder=function(){var e=u(regeneratorRuntime.mark(function e(){var t,r,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.default.getState().base.accessToken,e.next=3,n.default.get(a.default+"/api/order",{params:{status:"all",identity:"orderer"},headers:{authorization:"Bearer "+t}});case 3:return r=e.sent,l=r.data,e.abrupt("return",l.data);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.acceptOrder=function(){var e=u(regeneratorRuntime.mark(function e(t){var r,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.default.getState().base.accessToken,e.next=3,n.default.post(a.default+"/api/order/"+t,{type:"accept"},{headers:{Authorization:"Bearer "+r}});case 3:return l=e.sent,e.abrupt("return",l.data);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.overtimeOrder=function(){var e=u(regeneratorRuntime.mark(function e(t){var r,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.default.getState().base.accessToken,e.next=3,n.default.post(a.default+"/api/order/"+t,{type:"overtime"},{headers:{Authorization:"Bearer "+r}});case 3:return l=e.sent,e.abrupt("return",l.data);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();var n=l(r("./node_modules/axios/index.js")),a=l(r("./source/api/url.js")),o=l(r("./source/store.js"));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,o){try{var l=t[a](o),u=l.value}catch(e){return void r(e)}if(!l.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}("next")})}}},"./source/api/url.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default="http://admin.hkairportqualitytaxi.com"},"./source/api/user.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateVehicleRegNo=t.upload=t.register=t.getMe=t.login=void 0;t.login=function(){var e=s(regeneratorRuntime.mark(function e(t,r){var l,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.default.post(a.default+"/api/user/login",{telephone_no:t,password:r,type:"driver"});case 2:return l=e.sent,u=l.data,e.next=6,o.default.whatIsMe(u.access_token);case 6:return e.abrupt("return",{access_token:u.access_token,user:u.user});case 7:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),t.getMe=function(){var e=s(regeneratorRuntime.mark(function e(t,r){var l,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.default.get(a.default+"/api/user/"+t,{headers:{authorization:"Bearer "+r}});case 3:return l=e.sent,u=l.data,e.next=7,o.default.whatIsMe(r);case 7:return e.abrupt("return",u.data);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",null);case 13:case"end":return e.stop()}},e,this,[[0,10]])}));return function(t,r){return e.apply(this,arguments)}}(),t.register=function(){var e=s(regeneratorRuntime.mark(function e(t,r,o,l,u,s){var i,c,d,f,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i="driver",e.next=3,n.default.post(a.default+"/api/user",{type:i,username:t,telephone_no:o,password:r,vehicle_reg_no:l,taxi_driver_id_no:u,taxi_driver_id_photo:s});case 3:return c=e.sent,d=c.data,f=d.access_token,p=d.user,e.abrupt("return",{access_token:f,user:p});case 6:case"end":return e.stop()}},e,this)}));return function(t,r,n,a,o,l){return e.apply(this,arguments)}}(),t.upload=function(){var e=s(regeneratorRuntime.mark(function e(t){var r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("image",t),e.next=4,n.default.post(a.default+"/api/upload",r);case 4:return o=e.sent,e.abrupt("return",o.data.data.filename);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.updateVehicleRegNo=function(){var e=s(regeneratorRuntime.mark(function e(t){var r,o,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.default.getState().base.accessToken,e.next=3,n.default.patch(a.default+"/api/user/"+l.default.getState().base.user._id,{vehicle_reg_no:t},{headers:{authorization:"Bearer "+r}});case 3:return o=e.sent,u=o.data,e.abrupt("return",u.data);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();var n=u(r("./node_modules/axios/index.js")),a=u(r("./source/api/url.js")),o=u(r("./source/socket.js")),l=u(r("./source/store.js"));function u(e){return e&&e.__esModule?e:{default:e}}function s(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,o){try{var l=t[a](o),u=l.value}catch(e){return void r(e)}if(!l.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}("next")})}}},"./source/components/modal/modal.jsx":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.installModal=function(e){return function(t){function r(e){l(this,r);var t=u(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.componentWillMount=function(e){i=function(e){return t.setState({component:e})},c=function(e){return t.setState({show:e})},d=function(e){return t.setState({header:e})}},t.state={show:!1,header:"Modal Header",component:function(e){return o.default.createElement(o.default.Fragment,null)}},t}return s(r,t),a(r,[{key:"render",value:function(){var t=this;return o.default.createElement(o.default.Fragment,null,o.default.createElement("div",{className:"modal fade"+(this.state.show?" in block":""),role:"dialog"},o.default.createElement("div",{className:"modal-dialog"},o.default.createElement("div",{className:"modal-content"},o.default.createElement("div",{className:"modal-header"},o.default.createElement("button",{type:"button",className:"close",onClick:function(e){return t.setState({show:!1})}},"×"),o.default.createElement("h4",{className:"modal-title"},this.state.header)),o.default.createElement(this.state.component,null)))),o.default.createElement(e,this.props))}}]),r}(o.default.Component)};var o=function(e){return e&&e.__esModule?e:{default:e}}(r("./node_modules/react/index.js"));function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=null,c=null,d=null;t.default=function(e){return function(t){function r(){var e,t,n;l(this,r);for(var a=arguments.length,o=Array(a),s=0;s<a;s++)o[s]=arguments[s];return t=n=u(this,(e=r.__proto__||Object.getPrototypeOf(r)).call.apply(e,[this].concat(o))),n.componentDidMount=function(){return i(n.refs.wrapped.renderModal)},u(n,t)}return s(r,o.default.Component),a(r,[{key:"render",value:function(){return o.default.createElement(e,n({},this.props,{ref:"wrapped",setShow:c,setHeader:d}))}}]),r}()}},"./source/cookie.js":function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function a(e){for(var t in e)"save"!==t&&"clear"!==t&&(this[t]=e[t])}a.prototype.save=function(e){for(var t in e.getAll())e.remove(t);for(var r in this)e.set(r,"object"===n(this[r])?JSON.stringify(this[r]):this[r])},a.prototype.clear=function(e){for(var t in this)delete this[t];for(var r in e.getAll())e.remove(r)},e.exports=a},"./source/css/bootstrap.css":function(e,t,r){},"./source/css/index.js":function(e,t,r){"use strict";r("./source/css/bootstrap.css"),r("./source/css/inline-class.css"),r("./source/css/preference.css")},"./source/css/inline-class.css":function(e,t,r){},"./source/css/preference.css":function(e,t,r){},"./source/index.js":function(e,t,r){"use strict";var n=c(r("./node_modules/react/index.js")),a=c(r("./node_modules/react-dom/index.js")),o=r("./node_modules/react-router-dom/es/index.js"),l=c(r("./source/store.js")),u=c(r("./source/router.jsx")),s=r("./node_modules/react-redux/es/index.js"),i=r("./node_modules/react-cookie/lib/index.js");function c(e){return e&&e.__esModule?e:{default:e}}r("./node_modules/ken.yip/css/bootstrap.css"),r("./node_modules/ken.yip/css/inline-class.css"),r("./source/css/index.js"),r("./node_modules/babel-core/register.js"),r("./node_modules/babel-polyfill/lib/index.js");var d=function(){a.default.render(n.default.createElement(s.Provider,{store:l.default},n.default.createElement(i.CookiesProvider,null,n.default.createElement(o.HashRouter,null,n.default.createElement(u.default,null)))),document.getElementById("root"))};window.cordova?document.addEventListener("deviceready",d,!1):d()},"./source/modules/base/base.action.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.setUser=function(e,t){return{type:"SET_USER",payload:{user:e,accessToken:t}}}},"./source/modules/base/base.reducer.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(e){return e&&e.__esModule?e:{default:e}}(r("./node_modules/ken.yip/react/createReducer.js"));var o={SET_USER:function(e,t){var r=n({},e);return r.user=t.payload.user,r.accessToken=t.payload.accessToken,r}};t.default=(0,a.default)({user:null,accessToken:null},o)},"./source/modules/index.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.action=void 0;var n=r("./node_modules/redux/es/redux.js"),a=function(e){return e&&e.__esModule?e:{default:e}}(r("./source/modules/base/base.reducer.js")),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r("./source/modules/base/base.action.js"));var l=(0,n.combineReducers)({base:a.default});t.action={base:o};t.default=l},"./source/pages/index.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(r("./source/pages/login/login.jsx")),a=u(r("./source/pages/register/index.js")),o=u(r("./source/pages/main/index.js")),l=u(r("./source/pages/order/index.js"));function u(e){return e&&e.__esModule?e:{default:e}}t.default={login:n.default,register:a.default,main:o.default,order:l.default}},"./source/pages/login/bg.png":function(e,t,r){e.exports=r.p+"images/194YYeTmdQ.png"},"./source/pages/login/login.css":function(e,t,r){},"./source/pages/login/login.jsx":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=m(r("./node_modules/react/index.js")),l=m(r("./source/pages/login/login.model.js")),u=m(r("./source/pages/login/login.view.jsx")),s=r("./source/modules/index.js"),i=r("./node_modules/react-redux/es/index.js"),c=r("./node_modules/react-cookie/lib/index.js"),d=m(r("./source/cookie.js")),f=m(r("./source/api/index.js")),p=m(r("./source/socket.js"));function m(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={phone:"",password:"",remainder:!1,alert:{show:!1,title:"",text:"",type:"text",placeholder:"",onConfirm:function(e){console.log(e)}}},r.model=l.default.bind(r)(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),a(t,[{key:"componentDidMount",value:function(){var e=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,o){try{var l=t[a](o),u=l.value}catch(e){return void r(e)}if(!l.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}("next")})}}(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.cookies,this.cookie=new d.default(t.getAll()),!this.cookie.access_token){e.next=7;break}return e.next=5,f.default.user.getMe(this.cookie.userId,this.cookie.access_token);case 5:(r=e.sent)?(this.props.setUser(r,this.cookie.access_token),this.props.history.push("/main"),p.default.whatIsMe()):this.cookie.clear(t);case 7:case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return o.default.createElement(u.default,n({},this.model,this.props,this.state))}}]),t}();t.default=(0,c.withCookies)((0,i.connect)(function(e,t){return{user:e.base.user}},function(e,t){return{setUser:function(t,r){return e(s.action.base.setUser(t,r))}}})(h))},"./source/pages/login/login.model.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.default=function(){var e=this;return{onFieldChange:function(t,r){var a=n({},e.state);a[t]=r,e.setState(a)},submit:function(){var t=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,o){try{var l=t[a](o),u=l.value}catch(e){return void r(e)}if(!l.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}("next")})}}(regeneratorRuntime.mark(function t(){var r,n,o,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.state,n=r.phone,o=r.password,""!==n.trim()&&""!==o.trim()){t.next=3;break}return t.abrupt("return",e.model.alert("登入錯誤","用戶電話及密碼不能留空!"));case 3:return t.prev=3,t.next=6,a.default.user.login(n,o);case 6:l=t.sent,e.props.setUser(l.user,l.access_token),e.cookie.access_token=l.access_token,e.cookie.userId=l.user._id,e.cookie.save(e.props.cookies),e.props.history.replace("/main"),t.next=18;break;case 14:return t.prev=14,t.t0=t.catch(3),console.error(t.t0),t.abrupt("return",e.model.alert("登入錯誤","密碼錯誤或賑號未被認證"));case 18:e.props.history.push("/main");case 19:case"end":return t.stop()}},t,e,[[3,14]])}));return function(){return t.apply(this,arguments)}}(),alert:function(t,r){var n=JSON.parse(JSON.stringify(e.state));n.alert.title=t,n.alert.text=r,n.alert.show=!0,n.alert.type="text",e.setState(n)},handleChange:function(t,r){return function(n){var a=JSON.parse(JSON.stringify(e.state));r?a[r][t]=n:a[t]=n,e.setState(a)}}}};var a=function(e){return e&&e.__esModule?e:{default:e}}(r("./source/api/index.js"))},"./source/pages/login/login.view.jsx":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(r("./node_modules/react/index.js"));o(r("./source/pages/login/bg.png"));r("./source/pages/login/login.css");var a=o(r("./node_modules/sweetalert-react/lib/index.js"));function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return n.default.createElement("div",{className:"login-container",style:{backgroundImage:"url('https://s3-ap-southeast-1.amazonaws.com/image-bucket-ken.yip/194YYeTmdQ%E6%8B%B7%E8%B2%9D.jpg')"}},"text"==e.alert.type&&n.default.createElement(a.default,{show:e.alert.show,title:e.alert.title,text:e.alert.text,onConfirm:function(t){return e.handleChange("show","alert")(!1)}}),n.default.createElement("div",{className:"login-container__dark"}),n.default.createElement("div",{className:"login-content"},n.default.createElement("div",{className:"brand"},n.default.createElement("h2",null," 的士電召 司機版 ")),n.default.createElement("p",null," 登入你的用戶 "),n.default.createElement("form",{className:"login-content__form"},n.default.createElement("div",{className:"form-group"},n.default.createElement("input",{className:"form-control",placeholder:"用戶電話",value:e.phone,type:"number",onChange:function(t){return e.onFieldChange("phone",t.target.value)}})),n.default.createElement("div",{className:"form-group"},n.default.createElement("input",{type:"password",className:"form-control",placeholder:"密碼",value:e.password,onChange:function(t){return e.onFieldChange("password",t.target.value)}})),n.default.createElement("div",{className:"form-group clearfix"},n.default.createElement("p",{className:"float-right pointer",onClick:function(t){return e.history.push("/register")}},"註冊為新用戶")),n.default.createElement("button",{type:"submit",className:"btn btn-success width100",onClick:function(t){t.preventDefault(),e.submit()}},"登入")),n.default.createElement("footer",null,"@ 2018. 的士電召. All RIGHT RESERVED.")))}},"./source/pages/main/index.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(r("./source/utils/mvp.js")),a=u(r("./source/pages/main/main.model.js")),o=u(r("./source/pages/main/main.jsx")),l=u(r("./source/pages/main/main.view.jsx"));function u(e){return e&&e.__esModule?e:{default:e}}t.default=(0,n.default)(a.default,o.default,l.default)},"./source/pages/main/main.css":function(e,t,r){},"./source/pages/main/main.jsx":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=(o(r("./node_modules/react/index.js")),o(r("./source/utils/mvp.js")));function o(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Presenter),n(t,[{key:"logout",value:function(){this.model.clearCookieAndGoBack()}},{key:"renewOrder",value:function(){this.model.getOrder()}},{key:"renewMe",value:function(){this.model.getMe()}},{key:"confirmOvertime",value:function(e){this.view.confirmOvertime(e)}}]),t}();t.default=l},"./source/pages/main/main.model.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var l,u=e[Symbol.iterator]();!(n=(l=u.next()).done)&&(r.push(l.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=f(r("./source/api/index.js")),l=r("./node_modules/react-redux/es/index.js"),u=f(r("./source/utils/mvp.js")),s=r("./node_modules/react-router-dom/es/index.js"),i=f(r("./source/socket.js")),c=r("./node_modules/react-cookie/lib/index.js"),d=f(r("./source/cookie.js"));function f(e){return e&&e.__esModule?e:{default:e}}function p(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,o){try{var l=t[a](o),u=l.value}catch(e){return void r(e)}if(!l.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}("next")})}}var m=function(e){function t(e){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleChange=function(e,t){return function(r){var n=JSON.parse(JSON.stringify(a.state));t?n[t][e]=r:n[e]=r,a.setState(n)}},a.clearCookieAndGoBack=function(){a.cookie.clear(a.props.cookies),a.props.history.replace("/")},a.getOrder=p(regeneratorRuntime.mark(function e(){var t,l,u,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.default.order.getOrder("new"),l=o.default.order.getOrdererOrder(),e.next=4,Promise.all([t,l]);case 4:u=e.sent,s=n(u,2),t=s[0],l=s[1],a.setState({orders:t,ordered:l});case 9:case"end":return e.stop()}},e,r)})),a.getMe=p(regeneratorRuntime.mark(function e(){var t,n,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.accessToken,n=a.props.user._id,e.next=4,o.default.user.getMe(n,t);case 4:l=e.sent,a.setState({me:l});case 6:case"end":return e.stop()}},e,r)})),a.state={orders:[],me:{},ordered:[]},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default.Model),a(t,[{key:"componentWillMount",value:function(){var e=this;if(null==this.props.user)return this.props.history.replace("/");var t=this.props.cookies;this.cookie=new d.default(t.getAll()),this.getOrder(),this.getMe(),i.default.listen(function(){var t=p(regeneratorRuntime.mark(function t(r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(r),!/ORDER_OVERTIME_CONFIRM-/gi.test(r)){t.next=3;break}return t.abrupt("return",e.presenter.confirmOvertime(r.split("-")[1]));case 3:t.t0=r,t.next="RENEW_ORDER_LIST"===t.t0?6:"ORDER_OVERTIME_DEL"===t.t0?10:13;break;case 6:return t.next=8,e.getOrder();case 8:return t.abrupt("break",13);case 10:return t.next=12,e.getOrder();case 12:return t.abrupt("break",13);case 13:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}())}},{key:"componentWillUnmount",value:function(){i.default.mute()}}]),t}();t.default=(0,l.connect)(function(e,t){return{user:e.base.user,accessToken:e.base.accessToken}},function(e,t){return{}})((0,s.withRouter)((0,c.withCookies)(m)))},"./source/pages/main/main.view.jsx":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=d(r("./node_modules/react/index.js")),o=d(r("./source/utils/mvp.js"));r("./source/pages/main/main.css");var l=d(r("./source/components/modal/modal.jsx")),u=d(r("./node_modules/sweetalert-react/lib/index.js")),s=d(r("./source/api/index.js")),i=d(r("./node_modules/moment/moment.js")),c=r("./node_modules/react-confirm-alert/lib/index.js");function d(e){return e&&e.__esModule?e:{default:e}}function f(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,o){try{var l=t[a](o),u=l.value}catch(e){return void r(e)}if(!l.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}("next")})}}r("./node_modules/react-confirm-alert/src/react-confirm-alert.css");var p="undefined"!=typeof window&&(window.SpeechRecognition||window.webkitSpeechRecognition||window.mozSpeechRecognition||window.msSpeechRecognition||window.oSpeechRecognition),m=!1,h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return g.call(r),r.state={tab:"orders",release:{tunnel:"any",taxiType:"red",passenger:4,payment:"cash",discount:100,start:"",mid:"",end:""},touch:!1,alert:{show:!1,title:"",text:"",type:"text",placeholder:"",onConfirm:function(e){console.log(e)}},modal:null},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.View),n(t,[{key:"componentDidMount",value:function(){var e=this;0==m&&this.prompt("修改車牌","請輸入你的新車牌號碼","車牌號碼",function(){var t=f(regeneratorRuntime.mark(function t(r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(""!=r.trim()){t.next=4;break}window.alert("你所輸入的車牌號碼不正確! "),t.next=9;break;case 4:return t.next=6,s.default.user.updateVehicleRegNo(r);case 6:return e.alertClose(),t.next=9,e.presenter.renewMe();case 9:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}()),m=!0;var t=this;p&&(this.recognition=new p,this.recognition.onstart=function(t){return e.setState({touch:!0})},this.recognition.onresult=function(t){for(var r="",n=t.resultIndex;n<t.results.length;++n)r=t.results[n][0].transcript,e.setState({touch:!1},function(t){return e.handleVoiceInput(r)})},this.recognition.onend=function(){t.setState({touch:!1})},this.recognition.onerror=function(){})}},{key:"render",value:function(){var e=this;return a.default.createElement("div",{className:"main__background"},"text"==this.state.alert.type&&a.default.createElement(u.default,{show:this.state.alert.show,title:this.state.alert.title,text:this.state.alert.text,onConfirm:function(t){return e.handleChange("show","alert")(!1)}}),"input"==this.state.alert.type&&a.default.createElement(u.default,{show:this.state.alert.show,title:this.state.alert.title,text:this.state.alert.text,type:"input",showCancelButton:!0,onCancel:this.alertClose,inputPlaceholder:this.state.alert.placeholder,onConfirm:this.state.alert.onConfirm}),a.default.createElement("div",{className:"main__section"},"orders"==this.state.tab&&a.default.createElement(this.renderOrders,null),"released"==this.state.tab&&a.default.createElement(this.renderOrderer,null),"release"==this.state.tab&&a.default.createElement(this.renderRelease,this.state),"setting"==this.state.tab&&a.default.createElement(this.renderSetting,null)),a.default.createElement("div",{className:"main__sidebar"},a.default.createElement("ul",{className:"main__sidebar__list"},a.default.createElement("li",{className:"orders"==this.state.tab?"active":"",onClick:function(t){return e.handleChange("tab")("orders")}},"接貨"),a.default.createElement("li",{className:"release"==this.state.tab?"active":"",onClick:function(t){return e.handleChange("tab")("release")}},"出貨"),a.default.createElement("li",{className:"released"==this.state.tab?"active":"",onClick:function(t){return e.handleChange("tab")("released")}},"已出"),a.default.createElement("li",{className:"setting"==this.state.tab?"active":"",onClick:function(t){return e.handleChange("tab")("setting")}},"設定"))))}}]),t}(),g=function(){var e=this;this.confirmOvertime=function(e){(0,c.confirmAlert)({title:"時間已過",message:"你的訂單已經有一分鍾沒有任何人接單, 會在一分鍾後自動取消, 請問你要繼續嗎?",buttons:[{label:"繼續",onClick:function(){return s.default.order.overtimeOrder(e)}},{label:"不繼續",onClick:function(){return s.default.order.cancelOrder(e)}}]})},this.alertClose=function(){var t=JSON.parse(JSON.stringify(e.state));t.alert.show=!1,e.setState(t)},this.alert=function(t,r){var n=JSON.parse(JSON.stringify(e.state));n.alert.title=t,n.alert.text=r,n.alert.show=!0,n.alert.type="text",e.setState(n)},this.prompt=function(t,r,n,a){var o=JSON.parse(JSON.stringify(e.state));o.alert.title=t,o.alert.text=r,o.alert.show=!0,o.alert.type="input",o.alert.placeholder=n,o.alert.onConfirm=a,e.setState(o)},this.recognition=null,this.renderModal=function(t){if(null==e.state.modal)return a.default.createElement(a.default.Fragment,null);if("previewOrder"==e.state.modal.type){var r=e.state.modal.order;return a.default.createElement(a.default.Fragment,null,a.default.createElement("div",{className:"modal-body"},a.default.createElement("table",{className:"table table-cs"},a.default.createElement("tbody",null,a.default.createElement("tr",null,a.default.createElement("td",null," 起點 "),a.default.createElement("td",null," ",r.start.address," ")),r.route&&a.default.createElement("tr",null,a.default.createElement("td",null," 中途站 "),a.default.createElement("td",null," ",r.route.address," ")),a.default.createElement("tr",null,a.default.createElement("td",null," 終點 "),a.default.createElement("td",null," ",r.end.address," ")),a.default.createElement("tr",null,a.default.createElement("td",null," 的士類型 "),a.default.createElement("td",null," ","green"==r.criteria.taxiType?"綠的":"red"==r.criteria.taxiType?"紅的":"籃的"," ")),a.default.createElement("tr",null,a.default.createElement("td",null," 折扣 "),a.default.createElement("td",null," ",100==r.criteria.discount?"千足金":90==r.criteria.discount?"九折":"八五折"," ")),a.default.createElement("tr",null,a.default.createElement("td",null," 乘客人數 "),a.default.createElement("td",null," ",4==r.criteria.passenger?"四人":5==r.criteria.passenger?"五人":6==r.criteria.passenger?"珍寶":7==r.criteria.passenger?"傷殘":""," 的士 ")),a.default.createElement("tr",null,a.default.createElement("td",null," 隧道 "),a.default.createElement("td",null," ","HungHomTunnel"==r.criteria.tunnel?"紅隧":"eastTunnel"==r.criteria.tunnel?"東隧":"westTunnel"==r.criteria.tunnel?"西隧":"任行"," "))))),a.default.createElement("div",{className:"modal-footer"},a.default.createElement("button",{type:"button",className:"btn btn-default","data-dismiss":"modal",onClick:function(t){e.setState({modal:null},function(t){return e.props.setShow(!1)})}},"關閉視窗"),e.props.user._id!=r.orderBy._id&&a.default.createElement("button",{type:"button",className:"btn btn-success","data-dismiss":"modal",onClick:function(){var t=f(regeneratorRuntime.mark(function t(n){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s.default.order.acceptOrder(r._id);case 3:a=t.sent,e.props.setShow(!1),e.setState({modal:null}),e.props.history.push("/order/"+a.data._id),t.next=13;break;case 9:return t.prev=9,t.t0=t.catch(0),console.error(t.t0),t.abrupt("return",window.alert("無法接受這個柯打。可能已經其他司機接受。"));case 13:case"end":return t.stop()}},t,e,[[0,9]])}));return function(e){return t.apply(this,arguments)}}()},"接受柯打")))}return a.default.createElement(a.default.Fragment,null)},this.recognize=function(){var t=e;if(window.plugins&&window.plugins.speechRecognition){var r=window.plugins.speechRecognition;t.setState({touch:!0}),r.startListening(function(e){t.setState({touch:!1}),t.handleVoiceInput(e[0])},function(){return t.setState({touch:!1}),window.alert('無法識辨你的查詢, 請用"去"字分開你的起點, 終點, 及目的地')},{lang:"yue-Hant-HK",showPopup:!0,prompt:"正在聆聽 ... "})}else p?e.state.touch?e.recognition.stop():e.recognition.start():window.alert("錯誤","你的裝置並不支持語音功能")},this.renderSetting=function(t){return a.default.createElement("div",null,a.default.createElement("div",{className:"setting-container"},a.default.createElement("table",{className:"table table-cs"},a.default.createElement("tbody",null,a.default.createElement("tr",null,a.default.createElement("td",{style:{width:"120px"}}," 用戶名字 "),a.default.createElement("td",null," ",e.props.me.username)),a.default.createElement("tr",null,a.default.createElement("td",{style:{width:"120px"}}," 用戶電話 "),a.default.createElement("td",null," ",e.props.me.telephone_no)),a.default.createElement("tr",null,a.default.createElement("td",{style:{width:"120px"}}," 車牌號碼 "),a.default.createElement("td",null," ",e.props.me.vehicle_reg_no)),a.default.createElement("tr",null,a.default.createElement("td",{style:{width:"120px"}}," 建立日期 "),a.default.createElement("td",null," ",(0,i.default)(e.props.me.createdAt).format("YYYY-MM-DD")))))),a.default.createElement("ul",{className:"order__tabs center"},a.default.createElement("li",{onClick:function(t){return e.presenter.logout()}},"登出"),a.default.createElement("li",null," 使用條款 "),a.default.createElement("li",{onClick:function(t){return e.prompt("修改車牌","請輸入你的新車牌號碼","車牌號碼",function(){var t=f(regeneratorRuntime.mark(function t(r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(""!=r.trim()){t.next=4;break}window.alert("輸入不正確","你所輸入的車牌號碼不正確! "),t.next=9;break;case 4:return t.next=6,s.default.user.updateVehicleRegNo(r);case 6:return e.alertClose(),t.next=9,e.presenter.renewMe();case 9:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}())}},"修改車牌")))},this.renderRelease=function(t){return a.default.createElement("div",{className:"order__release"},a.default.createElement("div",{className:"order__form"},a.default.createElement("div",{className:"order__form__left"},a.default.createElement("div",{className:"form-group"},a.default.createElement("input",{className:"form-control",placeholder:"起點",value:t.release.start,onChange:function(t){return e.handleChange("start","release")(t.target.value)}})),a.default.createElement("div",{className:"form-group"},a.default.createElement("input",{className:"form-control",placeholder:"中途站",value:t.release.mid,onChange:function(t){return e.handleChange("mid","release")(t.target.value)}})),a.default.createElement("div",{className:"form-group"},a.default.createElement("input",{className:"form-control",placeholder:"終點",value:t.release.end,onChange:function(t){return e.handleChange("end","release")(t.target.value)}}))),a.default.createElement("div",{className:"order__form__right"},a.default.createElement("div",{className:"order__form__record-button",onClick:function(t){return e.recognize()}},a.default.createElement("i",{className:"icon-volume-medium",style:{color:e.state.touch?"white":"black"}})))),a.default.createElement("div",{className:"order__select"},a.default.createElement("div",null,a.default.createElement("div",{className:"any"==e.state.release.tunnel?"selected":"bg-lightyellow black",onClick:function(t){return e.handleChange("tunnel","release")("any")}},"任行"),a.default.createElement("div",{className:"eastTunnel"==e.state.release.tunnel?"selected":"bg-blue black",onClick:function(t){return e.handleChange("tunnel","release")("eastTunnel")}},"東隧"),a.default.createElement("div",{className:"westTunnel"==e.state.release.tunnel?"selected":"bg-lightpink black",onClick:function(t){return e.handleChange("tunnel","release")("westTunnel")}},"西隧"),a.default.createElement("div",{className:"HungHomTunnel"==e.state.release.tunnel?"selected":"bg-red",onClick:function(t){return e.handleChange("tunnel","release")("HungHomTunnel")}},"紅隧"),a.default.createElement("div",{className:"red"==e.state.release.taxiType?"selected":"bg-red",onClick:function(t){return e.handleChange("taxiType","release")("red")}},"紅的"),a.default.createElement("div",{className:"green"==e.state.release.taxiType?"selected":"bg-green",onClick:function(t){return e.handleChange("taxiType","release")("green")}},"綠的"),a.default.createElement("div",{className:"blue"==e.state.release.taxiType?"selected":"bg-blue black",onClick:function(t){return e.handleChange("taxiType","release")("blue")}},"籃的")),a.default.createElement("div",null,a.default.createElement("div",{className:4==e.state.release.passenger?"selected":"bg-green",onClick:function(t){return e.handleChange("passenger","release")(4)}},"四人"),a.default.createElement("div",{className:5==e.state.release.passenger?"selected":"bg-green",onClick:function(t){return e.handleChange("passenger","release")(5)}},"五人"),a.default.createElement("div",{className:6==e.state.release.passenger?"selected":"bg-green",onClick:function(t){return e.handleChange("passenger","release")(6)}},"珍寶"),a.default.createElement("div",{className:7==e.state.release.passenger?"selected":"bg-green",onClick:function(t){return e.handleChange("passenger","release")(7)}},"傷殘")),a.default.createElement("div",null,a.default.createElement("div",{className:"cash"==e.state.release.payment?"selected":"bg-lightyellow black",onClick:function(t){return e.handleChange("payment","release")("cash")}},"現金"),a.default.createElement("div",{className:"creditCard"==e.state.release.payment?"selected":"bg-lightpink black",onClick:function(t){return e.handleChange("payment","release")("creditCard")}},"信用卡"),a.default.createElement("div",{className:"alipay"==e.state.release.payment?"selected":"bg-blue black",onClick:function(t){return e.handleChange("payment","release")("alipay")}},"支付寶")),a.default.createElement("div",null,a.default.createElement("div",{className:100==e.state.release.discount?"selected":"bg-lightyellow black",onClick:function(t){return e.handleChange("discount","release")(100)}},"千足金"),a.default.createElement("div",{className:90==e.state.release.discount?"selected":"bg-lightpink black",onClick:function(t){return e.handleChange("discount","release")(90)}},"九仔"),a.default.createElement("div",{className:85==e.state.release.discount?"selected":"bg-blue black",onClick:function(t){return e.handleChange("discount","release")(85)}},"會員柯"),a.default.createElement("div",{style:{backgroundColor:"#5cb85c"},onClick:function(){var t=f(regeneratorRuntime.mark(function t(r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(""!=e.state.release.start&&""!=e.state.release.end){t.next=2;break}return t.abrupt("return",window.alert("請填寫你的起點及終點"));case 2:return t.prev=2,t.next=5,s.default.order.makeOrder(e.state.release.start,e.state.release.mid,e.state.release.end,{taxiType:e.state.release.taxiType,discount:e.state.release.discount,tunnel:e.state.release.tunnel,passenger:e.state.release.passenger});case 5:window.alert("你已經成功送出柯打, 你可以在已出tab 或接貨頁面中查看或取消柯打"),e.setState({release:{tunnel:"any",taxiType:"red",passenger:4,payment:"cash",discount:100,start:"",mid:"",end:""}},function(t){return e.presenter.renewOrder()}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),window.alert("請檢查你的起點及終點 (提示: 使用一些比較有指標性的名字)");case 12:case"end":return t.stop()}},t,e,[[2,9]])}));return function(e){return t.apply(this,arguments)}}()},"確定"))))},this.handleVoiceInput=function(t){var r=t.split("去"),n=JSON.parse(JSON.stringify(e.state));return 3==r.length?(n.release.start=r[0],n.release.mid=r[1],n.release.end=r[2],e.setState(n)):2==r.length?(n.release.start=r[0],n.release.mid="",n.release.end=r[1],e.setState(n)):window.alert('無法識辨你的查詢, 請用"去"字分開你的起點, 終點, 及目的地')},this.renderOrderer=function(t){return a.default.createElement("div",{className:"order__list"},e.props.ordered.map(e.renderOrdered))},this.renderOrdered=function(t,r){var n=100==t.criteria.discount?"yellow":90==t.criteria.discount?"green":"white";return a.default.createElement("div",{className:"order",key:r},a.default.createElement("div",{className:"order__from_to",style:{color:n},onClick:function(r){e.props.setHeader("查看柯打"),e.setState(function(r){return e.props.history.push("/order/"+t._id)})}},a.default.createElement("div",{className:"from"}," ",t.start.address," "),a.default.createElement("i",{className:"icon-arrow-right7"}),a.default.createElement("div",{className:"to"}," ",t.end.address," ")),a.default.createElement("ul",{className:"order__tabs"},a.default.createElement("li",{style:{backgroundColor:"red"},onClick:f(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,s.default.order.makeOrder(t.start.address,t.mid?t.mid.address:"",t.end.address,{taxiType:t.criteria.taxiType,discount:t.criteria.discount,tunnel:t.criteria.tunnel,passenger:t.criteria.passenger});case 2:window.alert("成功重出柯打, 你可以在已出tab 或接貨頁面中查看或取消柯打"),e.presenter.renewOrder();case 4:case"end":return r.stop()}},r,e)}))},"重出"),"new"==t.status&&a.default.createElement("li",{style:{backgroundColor:"red"},onClick:f(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,s.default.order.cancelOrder(t._id);case 2:return r.next=4,e.presenter.renewOrder();case 4:window.alert("成功刪除柯打!");case 5:case"end":return r.stop()}},r,e)}))},"刪除"),"canceled"==t.status&&a.default.createElement("li",{style:{backgroundColor:"red"}},"已取消"),"accepted"==t.status&&a.default.createElement("li",{style:{backgroundColor:"green"}},"已接受"),"accepted"==t.status&&a.default.createElement("li",{style:{backgroundColor:"green"}},"會員 ",t.acceptBy.username),a.default.createElement("li",{style:{backgroundColor:t.criteria.taxiType}},"green"==t.criteria.taxiType?"綠的":"red"==t.criteria.taxiType?"紅的":"籃的"),a.default.createElement("li",{style:{backgroundColor:"green"}},100==t.criteria.discount?"千足金":90==t.criteria.discount?"九折":"八五折"),a.default.createElement("li",{style:{backgroundColor:"green"}},4==t.criteria.passenger?"四人":5==t.criteria.passenger?"五人":6==t.criteria.passenger?"珍寶":7==t.criteria.passenger?"傷殘":""," 的士"),("HungHomTunnel"==t.criteria.tunnel||"eastTunnel"==t.criteria.tunnel||"westTunnel"==t.criteria.tunnel)&&a.default.createElement("li",{style:{backgroundColor:"green"}},"HungHomTunnel"==t.criteria.tunnel?"紅隧":"eastTunnel"==t.criteria.tunnel?"東隧":"westTunnel"==t.criteria.tunnel?"西隧":"任行")),t.criteria.required&&a.default.createElement("div",{className:"order__remark"}," 備註: ",t.criteria.required," "))},this.renderOrders=function(t){return a.default.createElement("div",{className:"order__list"},e.props.orders.map(e.renderOrder))},this.renderOrder=function(t,r){var n=100==t.criteria.discount?"yellow":90==t.criteria.discount?"green":"white";return console.log(t),a.default.createElement("div",{className:"order",key:r},a.default.createElement("div",{className:"order__from_to",style:{color:n},onClick:function(r){e.props.setHeader("查看柯打"),e.setState({modal:{type:"previewOrder",order:t}},function(t){return e.props.setShow(!0)})}},a.default.createElement("div",{className:"from"}," ",t.start.address," "),a.default.createElement("i",{className:"icon-arrow-right7"}),a.default.createElement("div",{className:"to"}," ",t.end.address," ")),a.default.createElement("ul",{className:"order__tabs"},e.props.user._id==t.orderBy._id&&a.default.createElement("li",{style:{backgroundColor:"red"},onClick:f(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,s.default.order.cancelOrder(t._id);case 2:return r.next=4,e.presenter.renewOrder();case 4:window.alert("成功刪除柯打!");case 5:case"end":return r.stop()}},r,e)}))},"刪除"),a.default.createElement("li",null," 會員 ",t.orderBy.username," "),"accepted"==t.status&&a.default.createElement("li",{style:{backgroundColor:"green"}},"會員 ",t.acceptBy.username),a.default.createElement("li",{style:{backgroundColor:t.criteria.taxiType}},"green"==t.criteria.taxiType?"綠的":"red"==t.criteria.taxiType?"紅的":"籃的"),a.default.createElement("li",{style:{backgroundColor:"green"}},100==t.criteria.discount?"千足金":90==t.criteria.discount?"九折":"八五折"),a.default.createElement("li",{style:{backgroundColor:"green"}},4==t.criteria.passenger?"四人":5==t.criteria.passenger?"五人":6==t.criteria.passenger?"珍寶":7==t.criteria.passenger?"傷殘":""," 的士"),("HungHomTunnel"==t.criteria.tunnel||"eastTunnel"==t.criteria.tunnel||"westTunnel"==t.criteria.tunnel)&&a.default.createElement("li",{style:{backgroundColor:"green"}},"HungHomTunnel"==t.criteria.tunnel?"紅隧":"eastTunnel"==t.criteria.tunnel?"東隧":"westTunnel"==t.criteria.tunnel?"西隧":"任行")),t.criteria.required&&a.default.createElement("div",{className:"order__remark"}," 備註: ",t.criteria.required," "))},this.handleChange=function(t,r){return function(n){var a=JSON.parse(JSON.stringify(e.state));r?a[r][t]=n:a[t]=n,e.setState(a)}}};t.default=(0,l.default)(h)},"./source/pages/order/index.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(r("./source/utils/mvp.js")),a=u(r("./source/pages/order/order.model.js")),o=u(r("./source/pages/order/order.jsx")),l=u(r("./source/pages/order/order.view.jsx"));function u(e){return e&&e.__esModule?e:{default:e}}t.default=(0,n.default)(a.default,o.default,l.default)},"./source/pages/order/map.jsx":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(e){return e&&e.__esModule?e:{default:e}}(r("./node_modules/react/index.js")),o=r("./node_modules/react-google-maps/lib/index.js");var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={directions:null},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.PureComponent),n(t,[{key:"componentDidMount",value:function(){var e=this,t=new google.maps.DirectionsService,r={origin:new google.maps.LatLng(this.props.origin.lat,this.props.origin.lng),destination:new google.maps.LatLng(this.props.destination.lat,this.props.destination.lng),travelMode:google.maps.TravelMode.DRIVING,optimizeWaypoints:!0};this.props.route&&(r.waypoints=[{location:new google.maps.LatLng(this.props.route.lat,this.props.route.lng),stopover:!0}]),t.route(r,function(t,r){r===google.maps.DirectionsStatus.OK?e.setState({directions:t}):console.error("error fetching directions "+t)})}},{key:"componentWillUnmount",value:function(){this.setState({directions:null})}},{key:"render",value:function(){var e=this,t=this.props.location||{lat:22.3699122,lng:114.11443068},r=(this.props.directions,(0,o.withGoogleMap)(function(r){return a.default.createElement(o.GoogleMap,{defaultZoom:16,center:t},e.state.directions&&a.default.createElement(o.DirectionsRenderer,{directions:e.state.directions}))})),n=this.props.height||"420px",l=this.props.width||"100%";return a.default.createElement("div",null,a.default.createElement(r,{googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyA83jZKHRmlOFXwdDM81X_pl7kyLb5o4FI&v=3.exp&libraries=geometry,drawing,places",mapElement:a.default.createElement("div",{style:{height:"100%"}}),containerElement:a.default.createElement("div",{style:{height:n,width:l,overflow:"hidden"}}),loadingElement:a.default.createElement("div",{style:{height:"300px",width:"100%",display:"flex",alignItems:"center",justifyContent:"center"}},a.default.createElement("h1",{className:"loading-text"}," Loading ... "))}))}}]),t}();t.default=l},"./source/pages/order/order.jsx":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});a(r("./node_modules/react/index.js"));var n=a(r("./source/utils/mvp.js"));function a(e){return e&&e.__esModule?e:{default:e}}var o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n.default.Presenter),t}();t.default=o},"./source/pages/order/order.model.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});o(r("./source/api/index.js"));var n=r("./node_modules/react-redux/es/index.js"),a=o(r("./source/utils/mvp.js"));function o(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Model),t}();t.default=(0,n.connect)(function(e,t){return{user:e.base.user}},function(e,t){return{}})(l)},"./source/pages/order/order.view.jsx":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=h(r("./node_modules/react/index.js")),o=h(r("./source/utils/mvp.js")),l=h(r("./source/pages/order/map.jsx")),u=r("./source/utils/react-orientation.js"),s=h(u),i=h(r("./source/api/index.js"));r("./source/pages/order/style.css");var c=h(r("./node_modules/sweetalert-react/lib/index.js")),d=r("./node_modules/react-router-dom/es/index.js"),f=r("./node_modules/react-cookie/lib/index.js"),p=h(r("./source/cookie.js")),m=r("./node_modules/react-redux/es/index.js");function h(e){return e&&e.__esModule?e:{default:e}}function g(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,o){try{var l=t[a](o),u=l.value}catch(e){return void r(e)}if(!l.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}("next")})}}var y=function(e,t){return"https://www.google.com/maps?saddr="+e.lat+","+e.lng+"&daddr="+t.lat+","+t.lng},v=function(e){function t(e){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getMe=g(regeneratorRuntime.mark(function e(){var t,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.accessToken,a=n.props.user._id,e.next=4,i.default.user.getMe(a,t);case 4:o=e.sent,n.setState({me:o});case 6:case"end":return e.stop()}},e,r)})),n.alert=function(e,t,r){var a=JSON.parse(JSON.stringify(n.state));a.alert.title=e,a.alert.text=t,a.alert.show=!0,a.alert.type="text",a.alert.onConfirm=r,n.setState(a)},n.renderPortrait=function(e){return a.default.createElement(a.default.Fragment,null,a.default.createElement(l.default,{height:"50%",origin:n.state.order.start,destination:n.state.order.end,route:n.state.order.route}),a.default.createElement("div",{className:"order_panel"},a.default.createElement("h4",{style:{padding:"0 5px"}}," 訂單資料 "),a.default.createElement("table",{className:"table table-cs"},a.default.createElement("tbody",null,a.default.createElement("tr",null,a.default.createElement("td",null," 起點 "),a.default.createElement("td",null,null!=n.state.myLoc&&a.default.createElement("a",{href:y(n.state.myLoc,n.state.order.start)}," ",n.state.order.start.address),null==n.state.myLoc&&a.default.createElement("span",null," ",n.state.order.start.address),a.default.createElement("i",{className:"icon-map",style:{marginLeft:"5px"}}))),n.state.order.route&&a.default.createElement("tr",null,a.default.createElement("td",null," 中途站 "),a.default.createElement("td",null,a.default.createElement("a",{href:y(n.state.order.start,n.state.order.route)}," ",n.state.order.route.address),a.default.createElement("i",{className:"icon-map",style:{marginLeft:"5px"}}))),a.default.createElement("tr",null,a.default.createElement("td",null," 終點 "),a.default.createElement("td",null,a.default.createElement("a",{href:y(n.state.order.route?n.state.order.route:n.state.order.start,n.state.order.end)}," ",n.state.order.end.address),a.default.createElement("i",{className:"icon-map",style:{marginLeft:"5px"}}))),a.default.createElement("tr",null,a.default.createElement("td",null," 折扣 "),a.default.createElement("td",null," ",100==n.state.order.criteria.discount?"原價":90==n.state.order.criteria.discount?"九折":"公司價")),a.default.createElement("tr",null,a.default.createElement("td",null," 發單人姓名 "),a.default.createElement("td",null," ",n.state.order.orderBy.username)),a.default.createElement("tr",null,a.default.createElement("td",null," 發單人電話 "),a.default.createElement("td",null," ",a.default.createElement("a",{href:"tel:"+n.state.order.orderBy.telephone_no},n.state.order.orderBy.telephone_no," ",a.default.createElement("i",{className:"icon-phone2",style:{marginLeft:"5px"}})," "))),a.default.createElement("tr",null,a.default.createElement("td",null," 發單人身份 "),a.default.createElement("td",null," ","driver"==n.state.order.orderBy.type?"司機":"乘客")),a.default.createElement("tr",null,a.default.createElement("td",{colSpan:"2"},a.default.createElement("div",{className:"flex",style:{marginTop:"16px"}},!n.state.confirmed&&n.state.order.orderBy._id!=n.props.user._id&&a.default.createElement(a.default.Fragment,null,a.default.createElement("button",{className:"btn btn-success width100",onClick:function(){var e=g(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.default.order.confirmOrder(n.state.order._id);case 2:return e.next=4,n.setState({confirmed:!0});case 4:n.alert("成功確認","你已成功確認這張柯打, 請盡快到達客戶所在地",function(){n.handleChange("show","alert")(!1)});case 5:case"end":return e.stop()}},e,r)}));return function(t){return e.apply(this,arguments)}}()},"確認"),a.default.createElement("button",{className:"btn btn-error width100",style:{margin:"0 5px"},onClick:function(){var e=g(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.default.order.releaseOrder(n.state.order._id);case 2:n.alert("取消確認","你已取消這張柯打",function(e){n.handleChange("show","alert")(!1),n.props.history.replace("/main")});case 3:case"end":return e.stop()}},e,r)}));return function(t){return e.apply(this,arguments)}}()},"取消")),a.default.createElement("button",{className:"btn btn-warning width100",onClick:function(e){return n.props.history.replace("/main")}},"返回"))))))))},n.renderLandscape=function(e){return a.default.createElement("div",{className:"flex"},a.default.createElement("div",{style:{flex:1}},a.default.createElement(l.default,{width:"100%",height:"100%",origin:n.state.order.start,destination:n.state.order.end,route:n.state.order.route})),a.default.createElement("div",{className:"order_panel",style:{flex:1,height:"94%"}},a.default.createElement("h4",{style:{padding:"0 5px"}}," 訂單資料 "),a.default.createElement("table",{className:"table table-cs"},a.default.createElement("tbody",null,a.default.createElement("tr",null,a.default.createElement("td",null," 起點 "),a.default.createElement("td",null,null!=n.state.myLoc&&a.default.createElement("a",{href:y(n.state.myLoc,n.state.order.start)}," ",n.state.order.start.address),null==n.state.myLoc&&a.default.createElement("span",null," ",n.state.order.start.address),a.default.createElement("i",{className:"icon-map",style:{marginLeft:"5px"}}))),n.state.order.route&&a.default.createElement("tr",null,a.default.createElement("td",null," 中途站 "),a.default.createElement("td",null,a.default.createElement("a",{href:y(n.state.order.start,n.state.order.route)}," ",n.state.order.route.address),a.default.createElement("i",{className:"icon-map",style:{marginLeft:"5px"}}))),a.default.createElement("tr",null,a.default.createElement("td",null," 終點 "),a.default.createElement("td",null,a.default.createElement("a",{href:y(n.state.order.start,n.state.order.end)}," ",n.state.order.end.address),a.default.createElement("i",{className:"icon-map",style:{marginLeft:"5px"}}))),a.default.createElement("tr",null,a.default.createElement("td",null," 折扣 "),a.default.createElement("td",null," ",100==n.state.order.criteria.discount?"原價":90==n.state.order.criteria.discount?"九折":"公司價")),n.state.order.orderBy._id!=n.props.user._id&&a.default.createElement(a.default.Fragment,null,a.default.createElement("tr",null,a.default.createElement("td",null," 發單人姓名 "),a.default.createElement("td",null," ",n.state.order.orderBy.username)),a.default.createElement("tr",null,a.default.createElement("td",null," 發單人電話 "),a.default.createElement("td",null," ",a.default.createElement("a",{href:"tel:"+n.state.order.orderBy.telephone_no},n.state.order.orderBy.telephone_no," ",a.default.createElement("i",{className:"icon-phone2",style:{marginLeft:"5px"}})," "))),a.default.createElement("tr",null,a.default.createElement("td",null," 發單人身份 "),a.default.createElement("td",null," ","driver"==n.state.order.orderBy.type?"司機":"乘客"))),n.state.order.acceptBy&&n.state.order.acceptBy._id&&a.default.createElement(a.default.Fragment,null,a.default.createElement("tr",null,a.default.createElement("td",null," 接單人姓名 "),a.default.createElement("td",null," ",n.state.order.acceptBy.username)),a.default.createElement("tr",null,a.default.createElement("td",null," 接單人電話 "),a.default.createElement("td",null," ",a.default.createElement("a",{href:"tel:"+n.state.order.acceptBy.telephone_no},n.state.order.acceptBy.telephone_no," ",a.default.createElement("i",{className:"icon-phone2",style:{marginLeft:"5px"}})," "))),a.default.createElement("tr",null,a.default.createElement("td",null," 接單人身份 "),a.default.createElement("td",null," ","driver"==n.state.order.acceptBy.type?"司機":"乘客"))),a.default.createElement("tr",null,a.default.createElement("td",{colSpan:"2"},a.default.createElement("div",{className:"flex",style:{marginTop:"16px"}},!n.state.confirmed&&n.state.order.orderBy._id!=n.props.user._id&&a.default.createElement(a.default.Fragment,null,a.default.createElement("button",{className:"btn btn-success width100",onClick:function(){var e=g(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.default.order.confirmOrder(n.state.order._id);case 2:return e.next=4,n.setState({confirmed:!0});case 4:n.alert("成功確認","你已成功確認這張柯打, 請盡快到達客戶所在地",function(){n.handleChange("show","alert")(!1)});case 5:case"end":return e.stop()}},e,r)}));return function(t){return e.apply(this,arguments)}}()},"確認"),a.default.createElement("button",{className:"btn btn-error width100",style:{margin:"0 5px"},onClick:function(){var e=g(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.default.order.releaseOrder(n.state.order._id);case 2:n.alert("取消確認","你已取消這張柯打",function(e){n.handleChange("show","alert")(!1),n.props.history.replace("/main")});case 3:case"end":return e.stop()}},e,r)}));return function(t){return e.apply(this,arguments)}}()},"取消")),a.default.createElement("button",{className:"btn btn-warning width100",onClick:function(e){return n.props.history.replace("/main")}},"返回"))))))))},n.state={order:null,myLoc:null,alert:{show:!1,title:"",text:"",type:"text",placeholder:"",onConfirm:function(e){console.log("Hello")}},modal:null,confirmed:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.View),n(t,[{key:"componentWillMount",value:function(){var e=g(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.props.user){e.next=2;break}return e.abrupt("return",this.props.history.replace("/"));case 2:return t=this.props.cookies,this.cookie=new p.default(t.getAll()),e.next=6,this.getMe();case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=g(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,e.next=3,i.default.order.getAnOrder(this.props.match.params.orderId);case 3:r=e.sent,this.setState({order:r}),navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){console.log(e);var r=e.coords,n=r.latitude,a=r.longitude;t.setState({myLoc:{lat:n,lng:a}})}):console.log("no navigator");case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return null==this.state.order?a.default.createElement(a.default.Fragment,null):a.default.createElement("div",{style:{backgroundColor:"#efefef",height:"100%",width:"100%"}},"text"==this.state.alert.type&&a.default.createElement(c.default,{show:this.state.alert.show,title:this.state.alert.title,text:this.state.alert.text,onConfirm:function(t){return e.state.alert.onConfirm()}}),a.default.createElement(s.default,{lockOrientation:"landscape"},a.default.createElement(u.Orientation,{orientation:"landscape",alwaysRender:!1},a.default.createElement(this.renderLandscape,null)),a.default.createElement(u.Orientation,{orientation:"portrait",alwaysRender:!1},a.default.createElement(this.renderPortrait,null))))}}]),t}();t.default=(0,m.connect)(function(e,t){return{user:e.base.user,accessToken:e.base.accessToken}},function(e,t){return{}})((0,d.withRouter)((0,f.withCookies)(v)))},"./source/pages/order/style.css":function(e,t,r){},"./source/pages/register/index.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(r("./source/utils/mvp.js")),a=u(r("./source/pages/register/register.model.jsx")),o=u(r("./source/pages/register/register.js")),l=u(r("./source/pages/register/register.view.jsx"));function u(e){return e&&e.__esModule?e:{default:e}}t.default=(0,n.default)(a.default,o.default,l.default)},"./source/pages/register/register.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});a(r("./node_modules/react/index.js"));var n=a(r("./source/utils/mvp.js"));function a(e){return e&&e.__esModule?e:{default:e}}var o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n.default.Presenter),t}();t.default=o},"./source/pages/register/register.model.jsx":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});o(r("./source/api/index.js"));var n=r("./node_modules/react-redux/es/index.js"),a=o(r("./source/utils/mvp.js"));function o(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Model),t}();t.default=(0,n.connect)(function(e,t){return{}},function(e,t){return{}})(l)},"./source/pages/register/register.view.jsx":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=s(r("./node_modules/react/index.js")),o=s(r("./source/utils/mvp.js")),l=(s(r("./node_modules/styled-components/dist/styled-components.browser.esm.js")),s(r("./source/pages/login/bg.png")),s(r("./source/components/modal/modal.jsx")),s(r("./node_modules/sweetalert-react/lib/index.js"))),u=s(r("./source/api/index.js"));function s(e){return e&&e.__esModule?e:{default:e}}function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,o){try{var l=t[a](o),u=l.value}catch(e){return void r(e)}if(!l.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}("next")})}}var c=function(e){function t(e){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.uploadImage=function(){var e=i(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({loading:!0}),e.next=3,u.default.user.upload(t);case 3:a=e.sent,n.setState({file:a}),n.setState({loading:!1});case 6:case"end":return e.stop()}},e,r)}));return function(t){return e.apply(this,arguments)}}(),n.handleChange=function(e,t){return function(r){var a=JSON.parse(JSON.stringify(n.state));t?a[t][e]=r:a[e]=r,n.setState(a)}},n.onSubmit=i(regeneratorRuntime.mark(function e(){var t,a,o,l,s,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.refs.name.value,a=n.refs.phone.value,o=n.refs.password.value,l=n.refs.password_repeat.value,s=n.refs.vehicle_reg_no.value,i=n.refs.taxi_driver_id_no.value,""!=t.trim()&&""!=a.trim()&&""!=o.trim()&&""!=l.trim()&&""!=s.trim()&&""!=i.trim()&&null!=n.state.file){e.next=8;break}return e.abrupt("return",n.alert("認證錯誤","請填寫所有資料"));case 8:if(o==l){e.next=10;break}return e.abrupt("return",n.alert("認證錯誤","密碼和輸入密碼不一樣"));case 10:return e.prev=10,e.next=13,u.default.user.register(t,o,a,s,i,n.state.file);case 13:n.alert("註冊成功","成功註冊! 你現在可以以 "+a+" 登入! ",function(e){console.log("hello"),n.handleChange("show","alert")(!1),n.props.history.replace("/")}),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(10),console.log(e.t0),n.alert("註冊失敗","資料有誤. 請檢查你的輸入! ");case 20:case"end":return e.stop()}},e,r,[[10,16]])})),n.alertClose=function(){var e=JSON.parse(JSON.stringify(n.state));e.alert.show=!1,n.setState(e)},n.alert=function(e,t,r){var a=JSON.parse(JSON.stringify(n.state));a.alert.title=e,a.alert.text=t,a.alert.show=!0,a.alert.type="text",a.alert.onConfirm=r,n.setState(a)},n.prompt=function(e,t,r,a){var o=JSON.parse(JSON.stringify(n.state));o.alert.title=e,o.alert.text=t,o.alert.show=!0,o.alert.type="input",o.alert.placeholder=r,o.alert.onConfirm=a,n.setState(o)},n.state={file:null,alert:{show:!1,title:"",text:"",type:"text",placeholder:"",onConfirm:function(e){console.log(e)}},loading:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.View),n(t,[{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this;return a.default.createElement("div",{className:"login-container",style:{backgroundImage:"url('https://s3-ap-southeast-1.amazonaws.com/image-bucket-ken.yip/194YYeTmdQ%E6%8B%B7%E8%B2%9D.jpg')"}},"text"==this.state.alert.type&&a.default.createElement(l.default,{show:this.state.alert.show,title:this.state.alert.title,text:this.state.alert.text,onConfirm:function(t){e.state.alert.onConfirm?e.state.alert.onConfirm():e.handleChange("show","alert")(!1)}}),"input"==this.state.alert.type&&a.default.createElement(l.default,{show:this.state.alert.show,title:this.state.alert.title,text:this.state.alert.text,type:"input",showCancelButton:!0,onCancel:this.alertClose,inputPlaceholder:this.state.alert.placeholder,onConfirm:this.state.alert.onConfirm}),a.default.createElement("input",{type:"file",accept:"image/*;capture=camera",id:"picture",style:{display:"none"},onChange:function(t){return e.uploadImage(t.target.files[0])}}),a.default.createElement("div",{className:"login-container__dark"}),a.default.createElement("div",{className:"login-content"},a.default.createElement("div",{className:"brand"},a.default.createElement("h2",null," 的士電召 司機版 ")),a.default.createElement("p",null,"註冊成為用戶 ",a.default.createElement("span",{className:"green pointer",style:{color:"lightgreen"},onClick:function(t){return e.props.history.goBack()}},"已註冊為用戶?")),a.default.createElement("form",{className:"login-content__form",onSubmit:function(e){return e.preventDefault()}},a.default.createElement("div",{className:"form-group"},a.default.createElement("input",{className:"form-control",placeholder:"用戶電話",type:"number",max:"8",ref:"phone"})),a.default.createElement("div",{className:"form-group"},a.default.createElement("input",{className:"form-control",placeholder:"用戶名字",ref:"name"})),a.default.createElement("div",{className:"form-group"},a.default.createElement("input",{className:"form-control",placeholder:"司機號碼",ref:"taxi_driver_id_no"})),a.default.createElement("div",{className:"form-group"},a.default.createElement("input",{className:"form-control",placeholder:"車牌號碼",ref:"vehicle_reg_no"})),a.default.createElement("div",{className:"form-group"},a.default.createElement("input",{type:"password",className:"form-control",placeholder:"密碼",ref:"password"})),a.default.createElement("div",{className:"form-group"},a.default.createElement("input",{type:"password",className:"form-control",placeholder:"重覆密碼",ref:"password_repeat"})),this.state.loading&&a.default.createElement("div",{className:"form-group"},a.default.createElement("button",{type:"submit",className:"btn btn-default width100"},a.default.createElement("i",{className:"fa fa-photo",style:{marginRight:"5px"},disabled:!0})," 正在上傳照片 ...")),this.state.file&&!this.state.loading&&a.default.createElement("div",{className:"form-group"},a.default.createElement("button",{type:"submit",className:"btn btn-success width100",onClick:function(e){document.getElementById("picture").click()}},a.default.createElement("i",{className:"fa fa-photo",style:{marginRight:"5px"}})," 已上傳司機證照片")),!this.state.file&&!this.state.loading&&a.default.createElement("div",{className:"form-group"},a.default.createElement("button",{type:"submit",className:"btn btn-default width100",onClick:function(e){document.getElementById("picture").click()}},a.default.createElement("i",{className:"fa fa-photo",style:{marginRight:"5px"}})," 上傳司機證照片")),a.default.createElement("button",{type:"submit",className:"btn btn-warning width100",onClick:function(t){t.preventDefault(),e.onSubmit()}},"註冊成為新用戶")),a.default.createElement("footer",{style:{paddingBottom:"10px"}},"@ 2018. 的士電召. All RIGHT RESERVED.")))}}]),t}();t.default=c},"./source/router.jsx":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=s(r("./node_modules/react/index.js")),o=r("./node_modules/react-router-dom/es/index.js"),l=s(r("./source/App.jsx")),u=s(r("./source/pages/index.js"));function s(e){return e&&e.__esModule?e:{default:e}}var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Component),n(t,[{key:"render",value:function(){return a.default.createElement(l.default,null,a.default.createElement(o.Switch,null,a.default.createElement(o.Route,{exact:!0,path:"/",component:u.default.login}),a.default.createElement(o.Route,{exact:!0,path:"/register",component:u.default.register}),a.default.createElement(o.Route,{exact:!0,path:"/main",component:u.default.main}),a.default.createElement(o.Route,{exact:!0,path:"/order/:orderId",component:u.default.order})))}}]),t}();t.default=i},"./source/socket.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=l(r("./node_modules/socket.io-client/lib/index.js")),a=l(r("./source/store.js")),o=l(r("./source/api/url.js"));function l(e){return e&&e.__esModule?e:{default:e}}function u(){this.io=null,this.socketId=null,this.interval,this.callback=function(e){return console.log(e)}}u.prototype.connect=function(){var e=this,t=this;this.io=(0,n.default)(o.default),this.io.on("connect",function(){var e=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,o){try{var l=t[a](o),u=l.value}catch(e){return void r(e)}if(!l.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}("next")})}}(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.socketId=this.id,console.log(t.socketId),t.renewLocation(),t.interval=setInterval(function(){return t.renewLocation},1e4),t.whatIsMe();case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),this.io.on("action",function(t){e.callback&&e.callback(t)}),this.io.on("disconnect",function(e){return clearInterval(t.interval)})},u.prototype.renewLocation=function(){var e=this;navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){var r=t.coords,n=r.latitude,a=r.longitude;e.io.emit("renew_location",{lat:n,lng:a})}):console.log("no location")},u.prototype.whatIsMe=function(e){var t=a.default.getState().base.accessToken;(e||t)&&this.io.emit("what_is_me",e||t)},u.prototype.listen=function(e){this.callback=e},u.prototype.mute=function(){this.callback=null},t.default=new u},"./source/store.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/redux/es/redux.js"),a=l(r("./source/modules/index.js")),o=l(r("./node_modules/redux-thunk/es/index.js"));function l(e){return e&&e.__esModule?e:{default:e}}var u=(0,n.createStore)(a.default,(0,n.applyMiddleware)(o.default));t.default=u},"./source/utils/mvp.js":function(e,t,r){"use strict";var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=r("./node_modules/react/index.js"),i=function(e){function t(e){o(this,t);var r=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.update=function(e){return r.setState(e)},r.presenter=e.presenter,r.presenter.setModel(r),r}return u(t,s.Component),a(t,[{key:"render",value:function(){var e=this,t=this.props.children,r=s.Children.map(t,function(t){return s.cloneElement(t,n({},e.state,e.props))});return s.createElement(s.Fragment,null,r)}}]),t}(),c=function(){function e(){o(this,e)}return a(e,[{key:"setView",value:function(e){this.view=e}},{key:"setModel",value:function(e){this.model=e}}]),e}(),d=function(e){function t(e){o(this,t);var r=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.handleChange=function(e,t){return function(n){var a=JSON.parse(JSON.stringify(r.state));t?a[t][e]=n:a[e]=n,r.setState(a)}},r.presenter=e.presenter,r.presenter.setView(r),r}return u(t,s.PureComponent),t}();e.exports=t=function(e,t,r){return function(a){var o=new t,l=s.createElement(r,n({},a,{presenter:o}));return s.createElement(e,{presenter:o},l)}},t.Model=i,t.View=d,t.Presenter=c},"./source/utils/react-orientation.js":function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0}),t.Orientation=void 0;var a=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var l,u=e[Symbol.iterator]();!(n=(l=u.next()).done)&&(r.push(l.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r("./node_modules/react/index.js"),u=function(e){return e&&e.__esModule?e:{default:e}}(l);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":n(t))&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":n(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=t.Orientation=function(e){function t(){return s(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,l.Component),o(t,[{key:"render",value:function(){var e=this.props,t=e.orientation,r=e.children,n=e.className;return u.default.createElement("div",{className:n+" react-orientation react-orientation--"+t},r)}}]),t}();d.defaultProps={className:"",alwaysRender:!0};var f=function(){return!1};window.screen.lockOrientationUniversal=window.screen.lockOrientation||window.screen.mozLockOrientation||window.screen.msLockOrientation;var p=function(e){function t(e){s(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.lockOrientation(e),r.onOrientationChange=r.onOrientationChange.bind(r),r.state={orienation:null,type:null,angle:null},r}return c(t,l.Component),o(t,[{key:"componentWillMount",value:function(){this.onOrientationChange(null)}},{key:"componentDidMount",value:function(){console.log("DeviceOrientation","componentDidMount"),window.screen.orientation&&"onchange"in window.screen.orientation?(console.log("Using screen.orientation.onchange"),window.screen.orientation.addEventListener("change",this.onOrientationChange)):"onorientationchange"in window?(console.log("Using window.onorientationchange"),window.addEventListener("orientationchange",this.onOrientationChange)):console.warn("No orientationchange events")}},{key:"componentWillUnmount",value:function(){console.log("DeviceOrientation","componentWillUnmount"),window.screen.orientation&&"onchange"in window.screen.orientation?(console.log("Removing screen.orientation.onchange"),window.screen.orientation.removeEventListener("change",this.onOrientationChange)):"onorientationchange"in window&&(console.log("Removing window.onorientationchange"),window.removeEventListener("orientationchange",this.onOrientationChange))}},{key:"onOrientationChange",value:function(e){var t=this.props.onOrientationChange||f,r="portrait",n="primary",o=0;if(window.orientation&&(o=window.orientation,r=90===Math.abs(o)?"landscape":"portrait"),window.screen.orientation){var l=window.screen.orientation.type.split("-"),u=a(l,2);r=u[0],n=u[1],o=window.screen.orientation}this.setState({orientation:r,type:n,angle:o}),t(r,n,o)}},{key:"lockOrientation",value:function(e){var t=e.lockOrientation;if("string"==typeof t){var r=this.props.onLockOrientation||f;return function(e){var t=window.screen;return t.orientation&&"function"==typeof t.orientation.lock?window.screen.orientation.lock(e):t.lockOrientationUniversal?new Promise(function(r,n){t.lockOrientationUniversal(e)?r():n()}):new Promise(function(e,t){return t()})}(t).then(function(){r(!0)}).catch(function(){r(!1)})}}},{key:"render",value:function(){var e=this.props,t=e.children,r=e.className,n=this.state.orientation;return u.default.createElement("div",{className:""+r},l.Children.map(t,function(e){var t=e.props;if(t.alwaysRender||t.orientation===n)return e}))}}]),t}();t.default=p;p.defaultProps={className:""}},0:function(e,t,r){r("./node_modules/babel-polyfill/lib/index.js"),e.exports=r("./source/index.js")},2:function(e,t){}});